import{f as fe,g as pe,G as Me,r as g,i as C,z as Q,c as r,o as c,a as t,F as I,l as X,v as Y,P as Ne,b as d,d as u,L as Te,x as S,j as A,t as f,p as L,n as V,O as me,N as Pe,_ as je,E as Ee,u as Fe}from"#entry";const ze={class:"space-y-6"},Ue={class:"card bg-base-100 shadow-sm"},Le={class:"card-body p-4"},Ve={class:"flex flex-wrap gap-4 items-end justify-between"},Oe={class:"flex flex-wrap gap-4 items-end"},Re={class:"form-control"},Be=["disabled"],We={class:"flex flex-wrap items-center gap-2 mt-4 border-t pt-4"},Ke={class:"flex items-center gap-2 ml-auto"},qe=["disabled"],He=["disabled"],Je=["disabled"],Qe={key:1,class:"flex flex-wrap gap-x-4 gap-y-2 items-center justify-between"},Xe={class:"flex items-center gap-3 flex-wrap"},Ye={class:"flex items-center gap-2 text-info font-semibold"},Ze={class:"flex items-center gap-2"},et=["disabled"],tt=["disabled"],st=["disabled"],nt={class:"flex gap-6 h-[calc(100vh-220px)]"},ot={class:"card bg-base-100 shadow-sm h-full flex flex-col"},at={class:"card-body flex flex-col h-full"},lt={class:"flex items-center justify-between mb-4"},it={key:0,class:"card-title text-base flex items-center whitespace-nowrap"},rt={class:"badge badge-neutral ml-2"},ct=["title"],dt=["onDragstart"],ut={class:"font-medium"},vt={class:"text-sm text-base-content/70"},mt={class:"text-sm font-semibold text-primary"},ft={key:0,class:"text-center text-base-content/50 py-8"},pt={class:"flex-1 grid gap-6 grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 content-start overflow-y-auto overflow-x-auto"},bt={class:"card-body"},gt={class:"flex justify-between items-center mb-4"},ht={class:"flex items-center gap-2 text-lg md:text-xl font-semibold"},xt={class:"ml-1 text-xs text-base-content/60"},wt={class:"dropdown dropdown-end"},_t={tabindex:"0",role:"button",class:"btn btn-ghost btn-sm btn-circle"},yt={tabindex:"0",class:"dropdown-content menu bg-base-100 rounded-box z-[1] w-48 p-2 shadow"},St=["onClick"],Ct=["onClick"],kt=["onClick"],Gt=["onClick"],It={class:"flex flex-col items-center justify-center bg-gradient-to-br from-base-200 via-base-100 to-base-300 rounded-xl p-4 mb-4 gap-3"},Dt={key:0,class:"flex items-center justify-center gap-3 w-full"},At=["onClick","disabled","title"],$t=["onClick","disabled","title"],Mt=["onDrop"],Nt=["onDragstart"],Tt={class:"font-medium text-sm flex items-center"},Pt={key:0,class:"ml-2 px-2 py-0.5 rounded bg-gray-300 text-xs text-gray-600"},jt={class:"text-xs text-base-content/70"},Et={class:"text-xs font-semibold text-primary flex items-center gap-1"},Ft={class:"opacity-60"},zt={class:"ml-2 flex gap-1"},Ut=["onClick"],Lt=["onClick"],Vt={key:0,class:"text-center text-base-content/50 py-4 text-sm"},Ot={key:1,class:"text-xs text-base-content/60 italic text-center"},Rt={class:"modal-box w-11/12 max-w-4xl"},Bt={class:"text-lg font-bold mb-4 flex items-center"},Wt={class:"space-y-4"},Kt={class:"text-2xl font-bold w-8"},qt={class:"flex-1"},Ht={class:"font-semibold"},Jt={class:"text-sm text-base-content/70"},Qt={class:"text-right"},Xt={class:"text-2xl font-bold text-primary"},Yt={class:"modal-action"},Zt={key:0,class:"w-full"},es={class:"flex justify-between items-center flex-wrap gap-y-2 gap-x-4"},ts={class:"flex gap-2 flex-wrap"},ss=["disabled"],ns={key:1,class:"w-full flex justify-end"},os=fe({__name:"GroupingTab",props:{classInfo:{}},setup(Z){const i=Z,h=pe(),{exportToExcel:O}=Pe(),{groupingBaseScores:$,groupingSessionScores:N,groupingActivityNames:T,groupingSessionGroupScores:be,groupingSessionIndividualScores:ge}=Me(h),P=g(),R=s=>{const e=Math.floor(Number(s));return!Number.isFinite(e)||e<2?2:Math.min(e,10)},x=g(R(i.classInfo.groupCount)),w=g(String(x.value)),B=g(!1),M=g(null),l=g([]),k=g(!1),j=g(!1),D=g(!1),G=g({}),E=g({}),y=C({get:()=>T.value[i.classInfo.id]||"",set:s=>{h.setGroupingActivityName(i.classInfo.id,s)}}),W=C(()=>$.value[i.classInfo.id]||{}),ee=C(()=>N.value[i.classInfo.id]||{}),K=C(()=>i.classInfo.students.filter(s=>s.isPresent&&!l.value.some(e=>e.members.some(o=>o.id===s.id)))),te=C(()=>[...l.value].sort((s,e)=>e.totalScore-s.totalScore)),se=C(()=>l.value.some(s=>s.members.length>0)),ne=()=>{D.value=!1},oe=()=>{l.value.length!==0&&(D.value=!0)},p=s=>s.members.map(e=>i.classInfo.students.find(n=>n.id===e.id)||e),_=()=>{const s=l.value.map(e=>({...e,members:e.members.map(o=>({...o}))}));B.value=!0,h.updateGroups(i.classInfo.id,s)},he=(s,e=!0,o)=>{const n={id:`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:s.trim(),members:[],totalScore:0,averageScore:0,createdAt:new Date,color:F()};return l.value.push(n),e&&_(),n},q=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16"],F=s=>{const e=typeof s=="number"?s%q.length:l.value.length%q.length;return q[e]},xe=()=>R(x.value),we=()=>{const s=Number(w.value);if(!Number.isFinite(s)||s<2||s>10){alert("組數必須介於 2 到 10 之間。");return}if(!i.classInfo?.students?.length||(H(),!confirm("這將重新分配所有學生，並將所有組別的總分歸零。確定要繼續嗎？")))return;const o=l.value.map((v,m)=>({id:v.id||`group_${Date.now()}_${m}`,name:v.name?.trim()||`第 ${m+1} 組`,color:v.color||F(m),totalScore:0,averageScore:0,createdAt:v.createdAt?new Date(v.createdAt):new Date})),a=(o.length?o:Array.from({length:xe()},(v,m)=>({id:`group_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`第 ${m+1} 組`,color:F(m),totalScore:0,averageScore:0,createdAt:new Date}))).map((v,m)=>({...v,members:[],color:v.color||F(m)}));l.value=a,G.value={};const b=i.classInfo.students.filter(v=>v.isPresent);if(l.value.length===0){alert("未建立任何組別，請先設定有效的組數");return}if(b.length===0){alert("目前沒有出席學生可供分組");return}[...b].sort(()=>Math.random()-.5).forEach((v,m)=>{const J=m%l.value.length;l.value[J].members.push({...v})}),_()},_e=(s,e=!0)=>{const o=l.value.length;let n=!1;if(s>o)for(let a=o;a<s;a++)he(`第 ${a+1} 組`,!1),n=!0;else s<o&&(n=l.value.splice(s).length>0);return n&&e&&_(),n},H=()=>{if(String(w.value).trim()===""){w.value=String(x.value);return}const s=Number(w.value);if(!Number.isFinite(s)){w.value=String(x.value);return}const e=Math.min(Math.max(Math.floor(s),2),10);e!==x.value&&(x.value=e,_e(e,!1)&&_(),h.updateGroupCount(i.classInfo.id,e)),w.value=String(x.value)},ye=()=>{confirm("這會將所有學生移回未分組狀態，但會保留現有組別。確定嗎？")&&(l.value=l.value.map(s=>({...s,members:[]})),_())},ae=s=>{M.value=s},le=s=>{M.value&&(s==="unassigned"?ie(M.value):Se(M.value,s),M.value=null)},Se=(s,e,o=!0)=>{const n=i.classInfo.students.find(b=>b.id===s),a=l.value.find(b=>b.id===e);!n||!a||(ie(s,!1),a.members.push({...n}),o&&_())},ie=(s,e=!0)=>{l.value.forEach(o=>{const n=o.members.findIndex(a=>a.id===s);n>-1&&o.members.splice(n,1)}),e&&_()},z=(s,e)=>{if(!i.classInfo.groupingActive)return;const o=e>0?"animate-score-bounce-green":"animate-score-bounce-red";G.value[s]=o,setTimeout(()=>{G.value[s]===o&&(G.value[s]=null)},500),h.addScoreToGroup(i.classInfo.id,s,e)},Ce=s=>{const e=l.value.find(n=>n.id===s);if(!e)return;const o=prompt("請輸入新的組名：",e.name);o&&o.trim()&&(e.name=o.trim(),_())},ke=s=>{if(confirm("確定要刪除此組別嗎？組內學生將移至未分組。")){const e=l.value.findIndex(o=>o.id===s);e>-1&&(l.value.splice(e,1),_())}},re=(s,e)=>{if(!i.classInfo.groupingActive)return;const o=e>0?"animate-score-bounce-green":"animate-score-bounce-red";E.value[s]=o,setTimeout(()=>{E.value[s]===o&&(E.value[s]=null)},500),h.addIndividualScoreInGroup(i.classInfo.id,s,e)},Ge=()=>{if(!se.value){alert("請先將學生分組，才能開始分組活動！");return}h.startClassGrouping(i.classInfo.id),D.value=!0},Ie=()=>{j.value=!0,P.value?.showModal()},De=()=>{confirm("確認要重設各組分數嗎？這將清除所有組別的總分。")&&(l.value.forEach(s=>{s.totalScore=0}),_(),h.endClassGrouping(i.classInfo.id),U(),D.value=!1)},ce=()=>{j.value=!1,P.value?.showModal()},U=()=>{P.value?.close(),j.value=!1},de=()=>{const s=new Date,e=s.toISOString().split("T")[0],o=te.value.map((v,m)=>({排行:m+1,組別:v.name,總分:v.totalScore,人數:p(v).length})),n={sheetName:"分組摘要",header:[["活動名稱:",y.value||"未命名"],["班級:",i.classInfo.name],["匯出日期:",s.toLocaleString("zh-TW")],[]],data:o,columnWidths:[{wch:8},{wch:25},{wch:10},{wch:10}]},b={sheetName:"學生得分明細",data:l.value.flatMap(v=>p(v).map(m=>{const J=W.value[m.id]??0,ve=ee.value[m.id]??0,Ae=be.value[i.classInfo.id]?.[m.id]??0,$e=ge.value[i.classInfo.id]?.[m.id]??0;return{組別:v.name,座號:m.id,姓名:m.name,出席情況:m.isPresent?"出席":"缺席",小組團體加分:Ae,小組個人加分:$e,本次活動總得分:ve,活動後總分:J+ve}})),columnWidths:[{wch:25},{wch:10},{wch:15},{wch:12},{wch:15},{wch:15},{wch:15},{wch:15}]},ue=`${e}-${y.value||"分組活動報告"}-${i.classInfo.name}`;O([n,b],ue)};return Q(()=>i.classInfo.groups,s=>{const e=Array.isArray(s)?s:[];l.value=e.map(n=>({...n,members:n.members?.map(a=>({...a}))||[],createdAt:n.createdAt?new Date(n.createdAt):new Date})),l.value.length===0&&(D.value=!1);const o=new Set(l.value.map(n=>n.id));Object.keys(G.value).forEach(n=>{o.has(n)||delete G.value[n]}),B.value&&(B.value=!1)},{deep:!0,immediate:!0}),Q(()=>i.classInfo.groupCount,s=>{const e=R(s);x.value!==e&&(x.value=e),w.value=String(e)},{immediate:!0}),Q(()=>x.value,(s,e)=>{s!==e&&(w.value=String(s))}),(s,e)=>{const o=Te;return c(),r("div",ze,[t("div",Ue,[t("div",Le,[s.classInfo.groupingActive?(c(),r("div",Qe,[t("div",Xe,[t("span",Ye,[d(o,{name:"CircleDot",class:"w-5 h-5 animate-pulse"}),e[17]||(e[17]=t("span",null,"分組進行中",-1))]),X(t("input",{"onUpdate:modelValue":e[2]||(e[2]=n=>y.value=n),type:"text",placeholder:"請輸入活動名稱...",class:"input input-sm input-bordered w-52"},null,512),[[Y,y.value]])]),t("div",Ze,[t("button",{onClick:ne,class:"btn btn-sm btn-outline gap-1",disabled:l.value.length===0,title:"展開所有組員"},[d(o,{name:"ChevronDown",class:"w-4 h-4"}),e[18]||(e[18]=u(" 展開組員 ",-1))],8,et),t("button",{onClick:oe,class:"btn btn-sm btn-outline gap-1",disabled:l.value.length===0,title:"收合所有組員"},[d(o,{name:"ChevronUp",class:"w-4 h-4"}),e[19]||(e[19]=u(" 收合組員 ",-1))],8,tt),t("button",{onClick:de,class:"btn btn-sm btn-info gap-1",disabled:!y.value.trim(),title:"匯出活動報告"},[d(o,{name:"Download",class:"w-4 h-4"}),e[20]||(e[20]=u(" 匯出 ",-1))],8,st),t("button",{onClick:ce,class:"btn btn-sm btn-warning gap-1",title:"顯示積分儀表板"},[d(o,{name:"Trophy",class:"w-4 h-4"}),e[21]||(e[21]=u(" 儀表板 ",-1))]),t("button",{onClick:Ie,class:"btn btn-sm btn-error gap-1"},[d(o,{name:"Square",class:"w-4 h-4"}),e[22]||(e[22]=u(" 結束分組 ",-1))])])])):(c(),r(I,{key:0},[t("div",Ve,[t("div",Oe,[t("div",Re,[e[9]||(e[9]=t("label",{class:"label py-1 mr-2"},[t("span",{class:"label-text"},"組數")],-1)),X(t("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>w.value=n),type:"number",min:"2",max:"10",class:"input input-bordered w-20",onBlur:H,onKeyup:Ne(H,["enter"])},null,544),[[Y,w.value]])]),t("button",{onClick:we,class:"btn btn-primary"},[d(o,{name:"Shuffle",class:"w-4 h-4 mr-2"}),e[10]||(e[10]=u(" 一鍵隨機分組 ",-1))]),t("button",{onClick:ye,class:"btn btn-ghost"},[d(o,{name:"Undo2",class:"w-4 h-4 mr-2"}),e[11]||(e[11]=u(" 一鍵還原 ",-1))])]),t("button",{onClick:Ge,class:"btn btn-success gap-2",disabled:l.value.length===0||!se.value},[d(o,{name:"Play",class:"w-4 h-4"}),e[12]||(e[12]=u(" 開始分組活動 ",-1))],8,Be)]),t("div",We,[e[16]||(e[16]=t("label",{class:"whitespace-nowrap text-base-content/80"},"活動名稱 (選填)",-1)),X(t("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>y.value=n),type:"text",placeholder:"例如：第二次分組討論",class:"input input-bordered w-60"},null,512),[[Y,y.value]]),t("div",Ke,[t("button",{onClick:ne,class:"btn btn-sm btn-outline gap-1",disabled:l.value.length===0,title:"展開所有組員"},[d(o,{name:"ChevronDown",class:"w-4 h-4"}),e[13]||(e[13]=u(" 展開組員 ",-1))],8,qe),t("button",{onClick:oe,class:"btn btn-sm btn-outline gap-1",disabled:l.value.length===0,title:"收合所有組員"},[d(o,{name:"ChevronUp",class:"w-4 h-4"}),e[14]||(e[14]=u(" 收合組員 ",-1))],8,He),t("button",{onClick:ce,class:"btn btn-warning",disabled:l.value.length===0},[d(o,{name:"Trophy",class:"w-4 h-4 mr-2"}),e[15]||(e[15]=u(" 積分儀表板 ",-1))],8,Je)])])],64))])]),t("div",nt,[t("aside",{class:S(["transition-all duration-300 flex-shrink-0",k.value?"w-20":"w-80"])},[t("div",ot,[t("div",at,[t("div",lt,[k.value?A("",!0):(c(),r("h3",it,[d(o,{name:"Users",class:"w-5 h-5 mr-2"}),e[23]||(e[23]=u(" 未分組學生 ",-1)),t("span",rt,f(K.value.length)+" 人",1)])),t("button",{onClick:e[3]||(e[3]=n=>k.value=!k.value),class:"btn btn-ghost btn-sm btn-circle",title:k.value?"展開":"收合"},[d(o,{name:k.value?"ChevronsRight":"ChevronsLeft",class:"w-4 h-4"},null,8,["name"])],8,ct)]),k.value?A("",!0):(c(),r("div",{key:0,class:"flex-1 overflow-y-auto space-y-2 p-1",onDrop:e[4]||(e[4]=n=>le("unassigned")),onDragover:e[5]||(e[5]=L(()=>{},["prevent"])),onDragenter:e[6]||(e[6]=L(()=>{},["prevent"]))},[(c(!0),r(I,null,V(K.value,n=>(c(),r("div",{key:n.id,class:S(["p-3 bg-base-200 rounded-lg cursor-move hover:bg-base-300 transition-colors","flex justify-between items-center"]),draggable:"true",onDragstart:a=>ae(n.id)},[t("div",null,[t("div",ut,f(n.name),1),t("div",vt," 座號 "+f(n.id),1)]),t("div",mt,f(n.totalScore)+"分 ",1)],40,dt))),128)),K.value.length===0?(c(),r("div",ft," 所有學生都已分組 ")):A("",!0)],32))])])],2),t("main",pt,[(c(!0),r(I,null,V(l.value,n=>(c(),r("div",{key:n.id,class:"card bg-base-100 shadow-sm"},[t("div",bt,[t("div",gt,[t("h3",ht,[t("div",{class:"w-4 h-4 rounded-full mr-2",style:me({backgroundColor:n.color})},null,4),u(" "+f(n.name)+" ",1),t("span",xt,f(p(n).length)+" 人 ",1)]),t("div",wt,[t("div",_t,[d(o,{name:"MoreVertical",class:"w-4 h-4"})]),t("ul",yt,[t("li",null,[t("a",{onClick:a=>Ce(n.id)},[d(o,{name:"Edit",class:"w-4 h-4"}),e[24]||(e[24]=u(" 編輯組名 ",-1))],8,St)]),t("li",null,[t("a",{onClick:a=>z(n.id,1),class:"text-success"},[d(o,{name:"Plus",class:"w-4 h-4"}),e[25]||(e[25]=u(" 加 1 分 ",-1))],8,Ct)]),t("li",null,[t("a",{onClick:a=>z(n.id,-1),class:"text-error"},[d(o,{name:"Minus",class:"w-4 h-4"}),e[26]||(e[26]=u(" 扣 1 分 ",-1))],8,kt)]),t("li",null,[t("a",{onClick:a=>ke(n.id),class:"text-error"},[d(o,{name:"Trash2",class:"w-4 h-4"}),e[27]||(e[27]=u(" 刪除組別 ",-1))],8,Gt)])])])]),t("div",It,[e[28]||(e[28]=t("span",{class:"text-xs text-base-content/60"},"總分",-1)),t("span",{class:S(["font-extrabold text-xl md:text-2xl lg:text-3xl text-primary px-2 py-1",G.value[n.id]])},f(n.totalScore),3),s.classInfo.groupingActive?(c(),r("div",Dt,[t("button",{onClick:a=>z(n.id,1),disabled:!s.classInfo.groupingActive||p(n).every(a=>!a.isPresent),title:p(n).every(a=>!a.isPresent)?"本組全員缺席，無法加分":"",class:S(["btn btn-md font-bold text-base px-6 py-1 rounded-full bg-gradient-to-r from-green-400 to-emerald-500 text-white border-none shadow transition-transform hover:scale-105 hover:from-green-500 hover:to-emerald-600",!s.classInfo.groupingActive||p(n).every(a=>!a.isPresent)?"opacity-50 cursor-not-allowed hover:scale-100":""])}," +1 ",10,At),t("button",{onClick:a=>z(n.id,-1),disabled:!s.classInfo.groupingActive||p(n).every(a=>!a.isPresent),title:p(n).every(a=>!a.isPresent)?"本組全員缺席，無法扣分":"",class:S(["btn btn-md font-bold text-base px-6 py-1 rounded-full bg-gradient-to-r from-rose-400 to-red-500 text-white border-none shadow transition-transform hover:scale-105 hover:from-rose-500 hover:to-red-600",!s.classInfo.groupingActive||p(n).every(a=>!a.isPresent)?"opacity-50 cursor-not-allowed hover:scale-100":""])}," -1 ",10,$t)])):A("",!0)]),D.value?(c(),r("p",Ot," 組員已收合，點擊「展開組員」查看 ")):(c(),r("div",{key:0,class:"min-h-32 space-y-2 bg-base-100",onDrop:a=>le(n.id),onDragover:e[7]||(e[7]=L(()=>{},["prevent"])),onDragenter:e[8]||(e[8]=L(()=>{},["prevent"]))},[(c(!0),r(I,null,V(p(n),a=>(c(),r("div",{key:a.id,class:S(["p-2 rounded cursor-move flex justify-between items-center transition-colors",a.isPresent?"bg-base-200 hover:bg-base-300":"bg-gray-200 text-gray-400 opacity-60"]),draggable:"true",onDragstart:b=>ae(a.id)},[t("div",null,[t("div",Tt,[u(f(a.name)+" ",1),a.isPresent?A("",!0):(c(),r("span",Pt,"今日缺席"))]),t("div",jt,f(a.id),1)]),t("div",Et,[i.classInfo.groupingActive?(c(),r(I,{key:0},[t("span",Ft,f(W.value[a.id]??""),1),e[29]||(e[29]=t("span",{class:"opacity-60"},"分",-1)),d(o,{name:"ArrowRight",class:"w-3 h-3 text-success"}),t("span",{class:S(["text-success font-bold",E.value[a.id]])},f((W.value[a.id]??0)+(ee.value[a.id]??0)),3),e[30]||(e[30]=t("span",{class:"text-success"},"分",-1)),t("div",zt,[t("button",{onClick:b=>re(a.id,1),class:"btn btn-xs btn-circle btn-outline btn-success",title:"個人加分"}," + ",8,Ut),t("button",{onClick:b=>re(a.id,-1),class:"btn btn-xs btn-circle btn-outline btn-error",title:"個人扣分"}," - ",8,Lt)])],64)):(c(),r(I,{key:1},[u(f(a.totalScore)+"分 ",1)],64))])],42,Nt))),128)),p(n).length===0?(c(),r("div",Vt," 拖拽學生到此組 ")):A("",!0)],40,Mt))])]))),128))])]),t("dialog",{ref_key:"scoreboardModal",ref:P,class:"modal"},[t("div",Rt,[t("h3",Bt,[d(o,{name:"Trophy",class:"w-5 h-5 mr-2"}),e[31]||(e[31]=u(" 小組積分儀表板 ",-1))]),t("div",Wt,[(c(!0),r(I,null,V(te.value,(n,a)=>(c(),r("div",{key:n.id,class:S(["flex items-center gap-4 p-4 rounded-lg",a===0?"bg-warning/20":a===1?"bg-info/20":a===2?"bg-accent/20":"bg-base-200"])},[t("div",Kt,f(a+1),1),t("div",{class:"w-6 h-6 rounded-full",style:me({backgroundColor:n.color})},null,4),t("div",qt,[t("div",Ht,f(n.name),1),t("div",Jt,f(p(n).length)+" 人 ",1)]),t("div",Qt,[t("div",Xt,f(n.totalScore),1)])],2))),128))]),t("div",Yt,[j.value?(c(),r("div",Zt,[t("div",es,[t("div",ts,[t("button",{onClick:de,class:"btn btn-info",disabled:!y.value.trim()},[d(o,{name:"Download",class:"w-4 h-4 mr-2"}),e[32]||(e[32]=u(" 匯出活動報表 ",-1))],8,ss),t("button",{onClick:De,class:"btn btn-warning"}," 結束並重設分數 ")]),t("button",{onClick:U,class:"btn btn-ghost"}," 取消 ")]),e[33]||(e[33]=t("p",{class:"text-xs text-base-content/60 mt-3 w-full"}," 提醒：設置活動名稱方可匯出活動報告，活動結束後就不可再匯出此次分組活動的報告。 ",-1))])):(c(),r("div",ns,[t("button",{onClick:U,class:"btn"},"關閉")]))])]),t("form",{method:"dialog",class:"modal-backdrop"},[t("button",{onClick:U},"close")])],512)])}}}),as=Object.assign(je(os,[["__scopeId","data-v-3c0b6a8a"]]),{__name:"GroupingTab"}),ls={key:0,class:"p-4 sm:p-6"},is={key:1,class:"text-center p-8"},cs=fe({__name:"grouping",setup(Z){const i=pe(),h=Ee(),O=C(()=>h.params.id),$=C(()=>i.classes.find(N=>N.id===O.value));return Fe(()=>({title:`${$.value?.name||"班級分組"} - 分組模式`})),(N,T)=>$.value?(c(),r("div",ls,[d(as,{"class-info":$.value},null,8,["class-info"])])):(c(),r("div",is,[...T[0]||(T[0]=[t("p",null,"正在載入班級資料...",-1),t("span",{class:"loading loading-lg loading-spinner text-primary"},null,-1)])]))}});export{cs as default};
