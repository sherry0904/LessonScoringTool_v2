import{f as g,g as w,z as y,i as _,B as C,u as S,c as d,o as c,a as t,b as i,l as a,n as k,t as o,d as L,F as D,p as A,s as N,_ as Q}from"#entry";const I={class:"p-6 max-w-7xl mx-auto space-y-8"},T={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},U={class:"flex items-center gap-3"},z={class:"relative"},B=["value"],$={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},q={class:"stats shadow"},V={class:"stat"},j={class:"stat-figure text-primary"},F={class:"stat-value text-primary"},K={class:"stats shadow"},M={class:"stat"},E={class:"stat-figure text-secondary"},G={class:"stat-value text-secondary"},H={class:"stats shadow"},P={class:"stat"},W={class:"stat-figure text-accent"},X={class:"stat-value text-accent"},J={class:"stats shadow"},O={class:"stat"},R={class:"stat-figure text-info"},Y={class:"stat-value text-info"},Z={class:"bg-base-100 rounded-2xl border border-base-300 shadow-sm overflow-hidden"},tt={class:"p-4 flex items-center justify-between border-b border-base-300"},st={class:"font-semibold flex items-center gap-2"},et={key:0,class:"max-h-[60vh] overflow-auto custom-scrollbar"},at={class:"table table-zebra"},ot=["onClick"],lt={class:"font-medium"},nt={class:"text-center font-mono"},dt={class:"hidden md:table-cell"},ct={class:"hidden md:table-cell"},it={key:1,class:"p-10 text-center text-base-content/60"},rt={key:0},ut={key:1},_t=g({__name:"students",setup(ht){const r=w(),u=y(),h=_(()=>r.classes.flatMap(e=>(e.students||[]).map(s=>({id:s.id,name:s.name,totalScore:s.totalScore||0,classId:e.id,className:e.name,createdAt:new Date(s.createdAt),uniqueKey:`${e.id}-${s.id}`})))),m=_(()=>{const e=u.searchQuery.trim().toLowerCase();return e?h.value.filter(s=>s.name.toLowerCase().includes(e)||s.className.toLowerCase().includes(e)||s.id.toLowerCase().includes(e)):h.value}),v=_(()=>h.value.length),p=_(()=>{const e=Date.now()-6048e5;return r.classes.filter(s=>new Date(s.updatedAt).getTime()>e).length}),x=_(()=>r.totalClasses?Math.round(v.value/r.totalClasses):0),f=e=>{r.selectClass(e),N(`/class/${e}`)},b=e=>new Date(e).toLocaleDateString("zh-TW",{month:"short",day:"numeric"});return C(()=>{u.setSearchQuery("")}),S({title:"學生管理 - 班級分組計分工具"}),(e,s)=>{const n=k;return c(),d("div",I,[t("div",T,[s[1]||(s[1]=t("div",null,[t("h1",{class:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"}," 學生管理 "),t("p",{class:"text-base-content/70 mt-2"},"跨班級檢視與管理所有學生")],-1)),t("div",U,[t("div",z,[t("input",{value:a(u).searchQuery,onInput:s[0]||(s[0]=l=>a(u).setSearchQuery(l.target.value)),type:"text",placeholder:"搜尋學生、班級或座號...",class:"input input-bordered pl-10 w-72"},null,40,B),i(n,{name:"Search",class:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-base-content/50"})])])]),t("div",$,[t("div",q,[t("div",V,[t("div",j,[i(n,{name:"Users",class:"w-8 h-8"})]),s[2]||(s[2]=t("div",{class:"stat-title"},"總學生數",-1)),t("div",F,o(a(v)),1)])]),t("div",K,[t("div",M,[t("div",E,[i(n,{name:"GraduationCap",class:"w-8 h-8"})]),s[3]||(s[3]=t("div",{class:"stat-title"},"班級數",-1)),t("div",G,o(a(r).totalClasses),1)])]),t("div",H,[t("div",P,[t("div",W,[i(n,{name:"Activity",class:"w-8 h-8"})]),s[4]||(s[4]=t("div",{class:"stat-title"},"本週更新班級",-1)),t("div",X,o(a(p)),1)])]),t("div",J,[t("div",O,[t("div",R,[i(n,{name:"Sparkles",class:"w-8 h-8"})]),s[5]||(s[5]=t("div",{class:"stat-title"},"平均每班學生",-1)),t("div",Y,o(a(x)),1)])])]),t("div",Z,[t("div",tt,[t("h2",st,[i(n,{name:"List",class:"w-5 h-5"}),L(" 全部學生 ("+o(a(m).length)+") ",1)]),s[6]||(s[6]=t("div",{class:"text-sm text-base-content/60"},"點擊學生可快速跳轉至其班級頁面",-1))]),a(m).length?(c(),d("div",et,[t("table",at,[s[7]||(s[7]=t("thead",{class:"sticky top-0 bg-base-200 z-10"},[t("tr",null,[t("th",{class:"w-20"},"座號"),t("th",null,"姓名"),t("th",{class:"w-24 text-center"},"總分"),t("th",{class:"hidden md:table-cell"},"所屬班級"),t("th",{class:"hidden md:table-cell"},"建立時間")])],-1)),t("tbody",null,[(c(!0),d(D,null,A(a(m),l=>(c(),d("tr",{key:l.uniqueKey,class:"hover cursor-pointer",onClick:mt=>f(l.classId)},[t("td",null,o(l.id),1),t("td",lt,o(l.name),1),t("td",nt,o(l.totalScore),1),t("td",dt,o(l.className),1),t("td",ct,o(b(l.createdAt)),1)],8,ot))),128))])])])):(c(),d("div",it,[i(n,{name:"UserX",class:"w-10 h-10 mx-auto mb-4 opacity-50"}),a(u).searchQuery?(c(),d("p",rt,"找不到符合「"+o(a(u).searchQuery)+"」的學生",1)):(c(),d("p",ut,"目前沒有任何學生資料"))]))])])}}}),pt=Q(_t,[["__scopeId","data-v-fc853d34"]]);export{pt as default};
